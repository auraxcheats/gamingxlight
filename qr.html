<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scan & Pay | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{background:#0b0b0f;color:#fff;font-family:Arial;text-align:center;padding:20px}
.box{max-width:380px;margin:60px auto;padding:25px;background:#141414;border-radius:14px;box-shadow:0 0 20px rgba(168,85,247,.4)}
h2,h3,h1{margin:6px 0}
button{padding:14px 22px;background:#a855f7;border:none;border-radius:10px;font-weight:800;cursor:pointer;margin-top:15px}
img{border-radius:12px;margin-top:15px}
a{color:#a855f7;text-decoration:none}
</style>
</head>
<body>
<div class="box">
  <h3 id="username">Hello, Guest</h3>
  <h2 id="pname">Loading...</h2>
  <h1 id="price"></h1>
  <img id="qrImage" src="qr.png" width="220" alt="Scan QR to Pay"><br>
  <p><b>UPI ID:</b> <span id="upiText">sahimam@ptyes</span></p>
  <button onclick="goPay()">I HAVE PAID</button>
  <p style="margin-top:15px"><a href="index.html">Back to Home</a></p>
</div>

<script>
const params=new URLSearchParams(window.location.search);
const product=params.get("product"),price=params.get("price");
if(!product||!price){document.body.innerHTML="<h2>Invalid Access</h2><a href='index.html'>Go Home</a>";}

document.getElementById("pname").innerText=decodeURIComponent(product);
document.getElementById("price").innerText="â‚¹"+price;

// Load QR & UPI from settings
const SETTINGS=JSON.parse(localStorage.getItem("SETTINGS")||"{}");
if(SETTINGS.qr) document.getElementById("qrImage").src=SETTINGS.qr;
if(SETTINGS.upi) document.getElementById("upiText").innerText=SETTINGS.upi;

function goPay(){window.location.href="./pay.html?product="+encodeURIComponent(product)+"&price="+price;}
</script>
</body>
</html>
