<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scan & Pay | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin:0; font-family:Arial, sans-serif; background:#0b0b0f; color:#fff; text-align:center; padding:20px;
}
.box {
  max-width:380px; margin:60px auto; padding:30px; background:#141414; border-radius:16px;
  box-shadow:0 0 25px rgba(168,85,247,0.5); position:relative;
}
.logo {
  width:120px; margin-bottom:20px;
}
h2,h1,h3 { margin:6px 0; }
#price { font-size:28px; font-weight:900; color:#a855f7; margin:10px 0; }

.qr-container {
  position:relative;
  display:inline-block;
  padding:15px;
  border-radius:20px;
  box-shadow:0 0 20px #a855f7;
  animation: glow 2s infinite alternate;
}
@keyframes glow {
  0% { box-shadow:0 0 20px #a855f7; }
  50% { box-shadow:0 0 35px #facc15; }
  100% { box-shadow:0 0 20px #a855f7; }
}

button {
  padding:14px 24px; background:#a855f7; border:none; border-radius:12px;
  font-weight:800; cursor:pointer; margin-top:25px; transition:.3s;
}
button:hover { opacity:.95; }

.popup {
  display:none; position:fixed; top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,.85); color:#fff; font-size:18px; font-weight:900;
  display:flex; align-items:center; justify-content:center; z-index:100; text-align:center;
}
.popup img { max-width:300px; border-radius:16px; }
a { color:#a855f7; text-decoration:none; display:block; margin-top:15px; }
</style>
</head>
<body>

<div class="box">
  <img src="logo.png" class="logo" alt="GAMING X LIGHT">

  <h3 id="username">Hello, Guest</h3>
  <h2 id="pname">Loading...</h2>
  <h1 id="price"></h1>

  <div class="qr-container">
    <img src="qr.png" width="220" alt="Scan QR to Pay">
  </div>

  <p><b>UPI ID:</b> sahimam@ptyes</p>

  <button id="paidBtn">I HAVE PAID</button>
  <a href="index.html">Back to Home</a>

  <!-- POPUP IMAGE -->
  <div class="popup" id="popupMsg">
    <img src="warning.png" alt="Make sure to do this setting in Guild.
And accept bot join request in guild .">
  </div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const product = params.get("product");
const price = parseFloat(params.get("price"));

const user = JSON.parse(localStorage.getItem("loggedUser"));
if(!user){
  alert("❌ You must login first!");
  window.location.href = "login.html";
}else{
  document.getElementById("username").innerText = "Hello, " + user.username;
}

if(!product || !price){
  document.body.innerHTML = "<h2>Invalid Access</h2><a href='index.html'>Go Home</a>";
}else{
  document.getElementById("pname").innerText = decodeURIComponent(product);
  document.getElementById("price").innerText = "₹" + price.toFixed(2);
}

// Exact amount check
document.getElementById("paidBtn").addEventListener("click", () => {
  let paidAmount = prompt(`Enter the amount you paid (₹${price.toFixed(2)}):`);
  if(parseFloat(paidAmount) === price){
    window.location.href = `pay.html?product=${encodeURIComponent(product)}&price=${price}`;
  } else {
    const popup = document.getElementById("popupMsg");
    popup.style.display = "flex";
    setTimeout(() => popup.style.display = "none", 4000);
  }
});
</script>

</body>
</html>
