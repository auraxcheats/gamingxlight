<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel | Gaming X Light</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#0b0b0f;color:#fff;padding:20px}
.container{max-width:1200px;margin:auto;background:#141414;padding:20px;border-radius:14px;border:1px solid rgba(255,255,255,.1)}
h2{text-align:center;margin-bottom:20px;color:#a855f7}
table{width:100%;border-collapse:collapse;font-size:14px;margin-bottom:20px}
th,td{border:1px solid rgba(255,255,255,.15);padding:8px;text-align:center}
th{background:#1f1f1f}
button{padding:6px 10px;border:none;border-radius:6px;font-weight:700;cursor:pointer}
.deleteBtn{background:#ff4d4d;color:#000}
.editBtn{background:#facc15;color:#000;margin-right:5px}
.exportBtn{background:#a855f7;color:#000;margin-top:15px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
input,textarea{width:100%;padding:8px;margin-bottom:8px;border-radius:6px;border:none;background:#0f0f0f;color:#fff}
h3{margin-top:25px;color:#a855f7}
</style>
</head>
<body>

<div class="container">
<div class="topbar">
  <h2>üõ° Admin Dashboard</h2>
  <div>
    <a href="index.html">‚¨Ö Home</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>
</div>

<h3>üåü Site Settings</h3>
<label>Site Logo URL:</label>
<input type="text" id="logoInput" placeholder="Enter logo URL">
<label>YouTube Link:</label>
<input type="text" id="youtubeInput" placeholder="YouTube channel link">
<label>Proof Link:</label>
<input type="text" id="proofInput" placeholder="Proof channel link">
<label>Admin Support Link:</label>
<input type="text" id="supportInput" placeholder="Telegram support link">
<label>QR Image URL:</label>
<input type="text" id="qrInput" placeholder="QR code image URL">
<label>UPI ID:</label>
<input type="text" id="upiInput" placeholder="UPI ID">
<button onclick="saveSettings()">üíæ Save Settings</button>

<h3>üì¶ Products</h3>
<table id="productsTable"></table>
<button onclick="addProductPrompt()">‚ûï Add New Product</button>
<button class="exportBtn" id="exportProductsBtn">‚¨á Export Products CSV</button>

<h3>üì¶ Orders</h3>
<table id="ordersTable"></table>
<button class="exportBtn" id="exportOrdersBtn">‚¨á Export Orders CSV</button>

</div>

<script>
// ====== ADMIN PASSWORD ======
const ADMIN_PASSWORD = "gaming_x_light";
if(!sessionStorage.getItem("isAdmin")){
  const pass = prompt("Enter Admin Password:");
  if(pass!==ADMIN_PASSWORD){ alert("‚ùå Access Denied!"); window.location.href="index.html"; }
  else sessionStorage.setItem("isAdmin","true");
}

function logout(){ sessionStorage.removeItem("isAdmin"); window.location.href="index.html"; }

// ====== SITE SETTINGS ======
const logoInput = document.getElementById("logoInput");
const youtubeInput = document.getElementById("youtubeInput");
const proofInput = document.getElementById("proofInput");
const supportInput = document.getElementById("supportInput");
const qrInput = document.getElementById("qrInput");
const upiInput = document.getElementById("upiInput");

let settings = JSON.parse(localStorage.getItem("siteSettings")||"{}");
logoInput.value = settings.logo||"";
youtubeInput.value = settings.youtube||"";
proofInput.value = settings.proof||"";
supportInput.value = settings.support||"";
qrInput.value = settings.qr||"";
upiInput.value = settings.upi||"";

function saveSettings(){
  settings.logo = logoInput.value;
  settings.youtube = youtubeInput.value;
  settings.proof = proofInput.value;
  settings.support = supportInput.value;
  settings.qr = qrInput.value;
  settings.upi = upiInput.value;
  localStorage.setItem("siteSettings", JSON.stringify(settings));
  alert("‚úÖ Settings Saved!");
}

// ====== PRODUCTS ======
let products = JSON.parse(localStorage.getItem("products")||"[]");
const productsTable = document.getElementById("productsTable");

function renderProducts(){
  productsTable.innerHTML = `<tr>
    <th>#</th><th>Name</th><th>Badge</th><th>Price</th><th>Features</th><th>Actions</th>
  </tr>`;
  if(products.length===0){
    const row = productsTable.insertRow();
    const cell = row.insertCell(); cell.colSpan=6; cell.innerText="No products"; cell.style.opacity=".6";
    return;
  }
  products.forEach((p,i)=>{
    const row = productsTable.insertRow();
    row.insertCell().innerText=i+1;
    row.insertCell().innerText=p.name;
    row.insertCell().innerText=p.badge;
    row.insertCell().innerText=p.price;
    row.insertCell().innerText=p.features.join(", ");
    const cell = row.insertCell();
    const editBtn = document.createElement("button");
    editBtn.innerText="Edit"; editBtn.className="editBtn";
    editBtn.onclick=()=>editProduct(i);
    const delBtn = document.createElement("button");
    delBtn.innerText="Delete"; delBtn.className="deleteBtn";
    delBtn.onclick=()=>{ if(confirm("Delete product?")){ products.splice(i,1); saveProducts(); } };
    cell.appendChild(editBtn); cell.appendChild(delBtn);
  });
}

function saveProducts(){
  localStorage.setItem("products", JSON.stringify(products));
  renderProducts();
}

function addProductPrompt(){
  const name = prompt("Product Name:");
  if(!name) return;
  const badge = prompt("Badge (optional):","HOT");
  const price = prompt("Price (‚Çπ):");
  if(!price) return;
  const features = prompt("Comma separated features:","Feature1, Feature2").split(",");
  products.push({name,badge,price,features});
  saveProducts();
}

function editProduct(i){
  const p = products[i];
  const name = prompt("Product Name:",p.name); if(!name) return;
  const badge = prompt("Badge:",p.badge);
  const price = prompt("Price (‚Çπ):",p.price); if(!price) return;
  const features = prompt("Comma separated features:",p.features.join(",")).split(",");
  products[i]={name,badge,price,features};
  saveProducts();
}

// ====== ORDERS ======
let orders = JSON.parse(localStorage.getItem("orders")||"[]");
const ordersTable = document.getElementById("ordersTable");

function renderOrders(){
  ordersTable.innerHTML = `<tr>
    <th>#</th><th>Username</th><th>Email</th><th>Product</th><th>Price</th><th>UTR</th><th>UID</th><th>Region</th><th>Telegram</th><th>WhatsApp</th>
  </tr>`;
  if(orders.length===0){
    const row = ordersTable.insertRow();
    const cell = row.insertCell(); cell.colSpan=10; cell.innerText="No orders"; cell.style.opacity=".6";
    return;
  }
  orders.forEach((o,i)=>{
    const row = ordersTable.insertRow();
    row.insertCell().innerText=i+1;
    row.insertCell().innerText=o.username||"Guest";
    row.insertCell().innerText=o.email||"N/A";
    row.insertCell().innerText=o.product;
    row.insertCell().innerText=o.price;
    row.insertCell().innerText=o.utr;
    row.insertCell().innerText=o.uid;
    row.insertCell().innerText=o.region;
    row.insertCell().innerText=o.telegram;
    row.insertCell().innerText=o.whatsapp;
  });
}

// ====== EXPORT ======
document.getElementById("exportProductsBtn").addEventListener("click",()=>{
  let csv="Name,Badge,Price,Features\n";
  products.forEach(p=>{ csv+=`${p.name},${p.badge},${p.price},"${p.features.join(";")}"\n`; });
  const a=document.createElement("a"); a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
  a.download="products.csv"; a.click();
});
document.getElementById("exportOrdersBtn").addEventListener("click",()=>{
  let csv="Username,Email,Product,Price,UTR,UID,Region,Telegram,WhatsApp\n";
  orders.forEach(o=>{ csv+=`${o.username},${o.email},${o.product},${o.price},${o.utr},${o.uid},${o.region},${o.telegram},${o.whatsapp}\n`; });
  const a=document.createElement("a"); a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
  a.download="orders.csv"; a.click();
});

renderProducts(); renderOrders();
</script>

</body>
</html>
