<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #1c1030, #0b0b0f 70%);
  color: #fff;
}
header {
  text-align:center;
  padding:20px;
}
header img {
  width: 100px;
  margin-bottom:10px;
}
header h1 {
  margin:0;
  font-size:24px;
  color:#facc15;
}
.container {
  max-width:1200px;
  margin:0 auto;
  padding:20px;
}
table {
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td {
  border:1px solid rgba(255,255,255,.2);
  padding:10px;
  text-align:center;
}
th {
  background:#1c1030;
}
tr:nth-child(even) {
  background:rgba(168,85,247,.05);
}
.delete-btn {
  background:#ff4d4d;
  border:none;
  padding:6px 10px;
  color:#000;
  font-weight:800;
  border-radius:6px;
  cursor:pointer;
}
.delete-btn:hover {opacity:.8;}
.export-btn {
  background:#facc15;
  border:none;
  padding:10px 15px;
  color:#000;
  font-weight:800;
  border-radius:6px;
  cursor:pointer;
  margin-bottom:10px;
}
.export-btn:hover {opacity:.9;}
select {
  padding:6px;
  border-radius:6px;
  background:#0f0f0f;
  color:#fff;
  border:none;
  font-weight:700;
}
.empty {
  text-align:center;
  color:#888;
  font-style:italic;
}
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="Logo">
  <h1>GAMING X LIGHT - Admin Dashboard</h1>
</header>

<div class="container">
  <button class="export-btn" onclick="exportCSV()">EXPORT CSV</button>
  <table>
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Product</th>
        <th>Price</th>
        <th>UTR</th>
        <th>Guild UID</th>
        <th>Region</th>
        <th>Telegram</th>
        <th>WhatsApp</th>
        <th>Email</th>
        <th>Status</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody id="orderTable">
      <tr><td colspan="11" class="empty">Loading orders...</td></tr>
    </tbody>
  </table>
</div>

<script>
// PASSWORD PROTECTION
const password = prompt("Enter admin password:");
if(password !== "gaming_x_light"){ // Change password here
  alert("‚ùå Incorrect password!");
  document.body.innerHTML="<h2 style='text-align:center;margin-top:50px;'>Access Denied</h2>";
  throw new Error("Access denied");
}

// LOAD ORDERS
function loadOrders(){
  const table = document.getElementById("orderTable");
  table.innerHTML = "";
  const orders = JSON.parse(localStorage.getItem("gx_orders")) || [];

  if(orders.length === 0){
    table.innerHTML = `<tr><td colspan="11" class="empty">No orders found</td></tr>`;
    return;
  }

  orders.forEach((o,i)=>{
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${o.orderId || "GX-"+Date.now()}</td>
      <td>${o.product}</td>
      <td>‚Çπ${o.price}</td>
      <td>${o.utr}</td>
      <td>${o.uid}</td>
      <td>${o.region}</td>
      <td>${o.telegram}</td>
      <td>${o.whatsapp}</td>
      <td>${o.email}</td>
      <td>
        <select onchange="updateStatus(${i}, this.value)">
          <option value="Pending" ${o.status==="Pending"?"selected":""}>üü° Pending</option>
          <option value="Approved" ${o.status==="Approved"?"selected":""}>üü¢ Approved</option>
          <option value="Rejected" ${o.status==="Rejected"?"selected":""}>üî¥ Rejected</option>
        </select>
      </td>
      <td>
        <button class="delete-btn" onclick="deleteOrder(${i})">Delete</button>
      </td>
    `;
    table.appendChild(row);
  });
}

// DELETE ORDER
function deleteOrder(index){
  if(!confirm("Are you sure to delete this order?")) return;
  let orders = JSON.parse(localStorage.getItem("gx_orders")) || [];
  orders.splice(index,1);
  localStorage.setItem("gx_orders", JSON.stringify(orders));
  loadOrders();
}

// UPDATE STATUS
function updateStatus(index, newStatus){
  let orders = JSON.parse(localStorage.getItem("gx_orders")) || [];
  orders[index].status = newStatus;
  localStorage.setItem("gx_orders", JSON.stringify(orders));
}

// EXPORT CSV
function exportCSV(){
  const orders = JSON.parse(localStorage.getItem("gx_orders")) || [];
  if(orders.length === 0){ alert("No orders to export"); return; }
  let csv = "Order ID,Product,Price,UTR,Guild UID,Region,Telegram,WhatsApp,Email,Status\n";
  orders.forEach(o=>{
    csv += `"${o.orderId || ""}","${o.product}","${o.price}","${o.utr}","${o.uid}","${o.region}","${o.telegram}","${o.whatsapp}","${o.email}","${o.status || "Pending"}"\n`;
  });
  const blob = new Blob([csv],{type:"text/csv"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "orders.csv";
  a.click();
}

loadOrders();
</script>

</body>
</html>
