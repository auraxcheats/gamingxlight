<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#0b0b0f;color:#fff;padding:20px}
.container{max-width:1200px;margin:auto;background:#141414;padding:20px;border-radius:14px;border:1px solid rgba(255,255,255,.1)}
h2{text-align:center;margin-bottom:20px;color:#a855f7}
table{width:100%;border-collapse:collapse;font-size:14px;margin-bottom:20px}
th,td{border:1px solid rgba(255,255,255,.15);padding:8px;text-align:center}
th{background:#1f1f1f}
button{padding:6px 10px;border:none;border-radius:6px;font-weight:700;cursor:pointer}
.deleteBtn{background:#ff4d4d;color:#000}
.editBtn{background:#facc15;color:#000;margin-left:5px}
.exportBtn{background:#a855f7;color:#000;margin-top:15px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
a{color:#a855f7;text-decoration:none;font-weight:700;margin-left:10px}
input,select{padding:6px;border-radius:6px;border:none;margin:4px 2px}
</style>
</head>
<body>
<div class="container">
<div class="topbar">
<h2>üõ° Admin Panel</h2>
<div><a href="index.html">‚¨Ö Home</a> | <a href="#" onclick="logout()">Logout</a></div>
</div>

<h3>üì¶ Products</h3>
<table id="productsTable"></table>
<button class="exportBtn" id="exportProductsBtn">‚¨á Export Products CSV</button>
<br>
<h3>üë• Orders</h3>
<table id="ordersTable"></table>
<button class="exportBtn" id="exportOrdersBtn">‚¨á Export Orders CSV</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL="https://dsrevynaanjmepnufzqi.supabase.co";
const SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzcmV2eW5hYW5qbWVwbnVmenFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODc1NTQsImV4cCI6MjA4NDA2MzU1NH0.jSw2LRo7bTjA2uXR89Zn6AJMBARCIz-Vu722Jm9NSmM";
const supabase=Supabase.createClient(SUPABASE_URL,SUPABASE_KEY);

const ADMIN_PASSWORD="gaming_x_light";
let isAdmin=sessionStorage.getItem("isAdmin");
if(!isAdmin){ const pass=prompt("Enter Admin Password"); if(pass!==ADMIN_PASSWORD){alert("‚ùå Access Denied!");window.location.href="index.html"}else{sessionStorage.setItem("isAdmin","true")}}
function logout(){sessionStorage.removeItem("isAdmin");window.location.href="index.html"}

// Load Products
async function loadProducts(){
  const {data,error}=await supabase.from('products').select('*').order('id',{ascending:true});
  const table=document.getElementById("productsTable");
  table.innerHTML="<tr><th>#</th><th>Name</th><th>Price</th><th>Badge</th><th>Features</th><th>Action</th></tr>";
  if(error){console.error(error);return;}
  data.forEach((p,i)=>{
    const row=table.insertRow();
    row.insertCell(0).innerText=i+1;
    row.insertCell(1).innerText=p.name;
    row.insertCell(2).innerText=p.price;
    row.insertCell(3).innerText=p.badge;
    row.insertCell(4).innerText=p.features;
    const cell=row.insertCell(5);
    const delBtn=document.createElement("button");
    delBtn.innerText="Delete"; delBtn.className="deleteBtn";
    delBtn.onclick=async()=>{
      if(confirm("Delete this product?")){await supabase.from('products').delete().eq('id',p.id);loadProducts();}
    }
    cell.appendChild(delBtn);
  });
}
loadProducts();

// Load Orders from localStorage
let orders=JSON.parse(localStorage.getItem("orders")||"[]");
const ordersTable=document.getElementById("ordersTable");
function renderOrders(){
  ordersTable.innerHTML="<tr><th>#</th><th>Product</th><th>Price</th><th>UTR</th><th>Guild UID</th><th>Region</th><th>Telegram</th><th>WhatsApp</th></tr>";
  orders.forEach((o,i)=>{
    const row=ordersTable.insertRow();
    row.insertCell(0).innerText=i+1;
    row.insertCell(1).innerText=o.product;
    row.insertCell(2).innerText=o.price;
    row.insertCell(3).innerText=o.utr;
    row.insertCell(4).innerText=o.uid;
    row.insertCell(5).innerText=o.region;
    row.insertCell(6).innerText=o.telegram;
    row.insertCell(7).innerText=o.whatsapp;
  });
}
renderOrders();
</script>
</body
