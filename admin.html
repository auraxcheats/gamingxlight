<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#0b0b0f;color:#fff;padding:20px}
.container{max-width:1200px;margin:auto;background:#141414;padding:20px;border-radius:14px;border:1px solid rgba(255,255,255,.1)}
h2{text-align:center;margin-bottom:20px;color:#a855f7}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{border:1px solid rgba(255,255,255,.15);padding:8px;text-align:center}
th{background:#1f1f1f}
button{padding:6px 10px;border:none;border-radius:6px;font-weight:700;cursor:pointer}
.deleteBtn{background:#ff4d4d;color:#000}
.editBtn{background:#facc15;color:#000;margin-right:5px}
.exportBtn{background:#a855f7;color:#000;margin-top:15px}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
a{color:#a855f7;text-decoration:none;font-weight:700;margin-left:10px}
</style>
</head>
<body>

<div class="container">
  <div class="topbar">
    <h2>üõ° Admin Dashboard</h2>
    <div>
      <a href="index.html">‚¨Ö Home</a>
      <a href="#" onclick="logout()">Logout</a>
    </div>
  </div>

  <h3>üì¶ Products</h3>
  <table id="productsTable"></table>
  <button class="exportBtn" id="exportProductsBtn">‚¨á Export Products CSV</button>
  <button class="exportBtn" onclick="addProduct()">‚ûï Add New Product</button>

  <h3 style="margin-top:30px">üí≥ Payment Settings</h3>
  <input type="text" id="upi" placeholder="UPI ID" style="padding:8px;margin-bottom:10px;width:250px">
  <input type="file" id="qrFile"><button onclick="updateQR()">Update QR</button>
  <p id="qrPreview"></p>

  <h3 style="margin-top:30px">üåê Social Links</h3>
  <input type="text" id="yt" placeholder="YouTube URL" style="padding:8px;margin-bottom:10px;width:250px">
  <input type="text" id="proof" placeholder="Proof Channel URL" style="padding:8px;margin-bottom:10px;width:250px">
  <input type="text" id="support" placeholder="Admin Support URL" style="padding:8px;margin-bottom:10px;width:250px">
  <button onclick="saveSettings()">Save Settings</button>
</div>

<script>
/* =============================
   üîê ADMIN PASSWORD
============================= */
const ADMIN_PASSWORD = "gaming_x_light";
if(sessionStorage.getItem("isAdmin")!=="true"){
  const pass = prompt("üîê Enter Admin Password:");
  if(pass!==ADMIN_PASSWORD){ alert("‚ùå Access Denied!"); window.location.href="index.html"; }
  else sessionStorage.setItem("isAdmin","true");
}
function logout(){ sessionStorage.removeItem("isAdmin"); window.location.href="index.html"; }

/* =============================
   üõí PRODUCTS MANAGEMENT
============================= */
let PRODUCTS = JSON.parse(localStorage.getItem("PRODUCTS")||"[]");
const productsTable = document.getElementById("productsTable");

function renderProducts(){
  productsTable.innerHTML = `<tr>
    <th>#</th><th>Name</th><th>Badge</th><th>Price</th><th>Features</th><th>Action</th>
  </tr>`;
  PRODUCTS.forEach((p,i)=>{
    const row = productsTable.insertRow();
    row.insertCell().innerText=i+1;
    row.insertCell().innerText=p.name;
    row.insertCell().innerText=p.badge;
    row.insertCell().innerText=p.price;
    row.insertCell().innerText=p.features.join(", ");
    const cell=row.insertCell();
    const edit=document.createElement("button");
    edit.className="editBtn"; edit.innerText="Edit";
    edit.onclick=()=>editProduct(i);
    const del=document.createElement("button");
    del.className="deleteBtn"; del.innerText="Delete";
    del.onclick=()=>{if(confirm("Delete this product?")){PRODUCTS.splice(i,1);saveProducts();}};
    cell.appendChild(edit);cell.appendChild(del);
  });
}
function saveProducts(){ localStorage.setItem("PRODUCTS",JSON.stringify(PRODUCTS)); renderProducts(); }
function addProduct(){
  const name=prompt("Product Name");if(!name) return;
  const badge=prompt("Badge"); const price=prompt("Price");
  const features=prompt("Features (comma separated)").split(",");
  PRODUCTS.push({name,badge,price,features}); saveProducts();
}
function editProduct(i){
  const p=PRODUCTS[i];
  const name=prompt("Name",p.name); if(name)p.name=name;
  const badge=prompt("Badge",p.badge); if(badge)p.badge=badge;
  const price=prompt("Price",p.price); if(price)p.price=price;
  const features=prompt("Features (comma separated)",p.features.join(","));
  if(features)p.features=features.split(",");
  saveProducts();
}

/* =============================
   üí≥ QR & UPI SETTINGS
============================= */
let SETTINGS = JSON.parse(localStorage.getItem("SETTINGS")||"{}");
document.getElementById("upi").value=SETTINGS.upi||"";
document.getElementById("yt").value=SETTINGS.yt||"";
document.getElementById("proof").value=SETTINGS.proof||"";
document.getElementById("support").value=SETTINGS.support||"";
if(SETTINGS.qr) document.getElementById("qrPreview").innerHTML=`<img src="${SETTINGS.qr}" width="120">`;

function updateQR(){
  const file=document.getElementById("qrFile").files[0];
  if(!file) return alert("Select QR file!");
  const reader=new FileReader();
  reader.onload=function(e){SETTINGS.qr=e.target.result; saveSettings();};
  reader.readAsDataURL(file);
}
function saveSettings(){
  SETTINGS.upi=document.getElementById("upi").value;
  SETTINGS.yt=document.getElementById("yt").value;
  SETTINGS.proof=document.getElementById("proof").value;
  SETTINGS.support=document.getElementById("support").value;
  localStorage.setItem("SETTINGS",JSON.stringify(SETTINGS));
  alert("‚úÖ Settings saved!");
}

renderProducts();
</script>

</body>
</html>
